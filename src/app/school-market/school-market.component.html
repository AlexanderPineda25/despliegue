<div class="container my-5">
  <header class="text-center mb-5">
    <h1 class="featurette-heading display-4 fw-bold">Mercado Escolar Campesino</h1>
    <p class="lead mt-3 text-muted" style="text-align: justify;">
      Apoya la economía local y el trabajo campesino comprando productos frescos y naturales.
    </p>
    <button *ngIf="isAdmin" class="btn btn-primary btn-lg px-5 py-2 rounded-pill" routerLink="/createProduct/new" aria-label="Crear nuevo producto">
      Crear Producto
    </button>
  </header>

  <div id="carouselProductos" class="carousel slide mb-5" data-bs-ride="carousel" role="region" aria-label="Productos destacados">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="assets/images/mercado1.jpg" class="d-block w-100 rounded" alt="Frutas orgánicas: Del campo a tu mesa" />
        <div class="carousel-caption d-md-block bg-overlay">
          <h2 class="featurette-heading fw-bold text-white">Frutas Orgánicas</h2>
          <p class="text-white">Del campo a tu mesa</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="assets/images/mercado2.jpg" class="d-block w-100 rounded" alt="Verduras frescas: Calidad y sabor incomparables" />
        <div class="carousel-caption d-md-block bg-overlay">
          <h2 class="featurette-heading fw-bold text-white">Verduras Frescas</h2>
          <p class="text-white">Calidad y sabor incomparables</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="assets/images/mercado3.jpg" class="d-block w-100 rounded" alt="Granos y legumbres: Variedad de productos locales" />
        <div class="carousel-caption d-md-block bg-overlay">
          <h2 class="featurette-heading fw-bold text-white">Granos y Legumbres</h2>
          <p class="text-white">Variedad de productos locales</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselProductos" data-bs-slide="prev" aria-label="Anterior">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselProductos" data-bs-slide="next" aria-label="Siguiente">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <div class="row text-center" role="list">
    <div class="col-sm-12 col-md-6 col-lg-4 mb-4" *ngFor="let product of products; trackBy: trackById" role="listitem">
      <div class="card h-100 shadow-sm" role="region" [attr.aria-label]="'Producto ' + product.name">
        <img [src]="product.image?.imageUrl" class="card-img-top" [alt]="product.name" style="object-fit: cover; height: 200px;" />
        <div class="card-body d-flex flex-column justify-content-between">
          <h2 class="featurette-heading fw-bold" tabindex="0">{{ product.name }}</h2>
          <p class="lead mt-2 text-muted" style="text-align: justify;">{{ product.description }}</p>
          <p class="lead text-muted" tabindex="0" style="text-align: justify;">
            <strong>Precio:</strong> {{ product.price | currency }}
          </p>
          <div class="mt-3">
            <button class="btn btn-primary btn-sm w-100 mb-2" [attr.aria-label]="'Agregar ' + product.name + ' al carrito'">
              Agregar al Carrito
            </button>
            <button *ngIf="isAdmin" class="btn btn-secondary btn-sm w-100 mb-2" routerLink="/createProduct/{{ product.id }}" [attr.aria-label]="'Editar ' + product.name">
              Editar
            </button>
            <button *ngIf="isAdmin" class="btn btn-danger btn-sm w-100" (click)="deleteProduct(product.id)" [disabled]="isDeleteInProgress" [attr.aria-label]="'Eliminar ' + product.name">
              Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
